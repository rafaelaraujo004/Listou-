<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listou - Lista de Compras</title>
    
    <!-- Meta tags for PWA -->
    <meta name="description" content="Lista de compras simples, r√°pida e eficiente. Organize suas compras facilmente.">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Listou">
    
    <!-- Manifest and Icons -->
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles-modern.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Preload important resources -->
    <link rel="preload" href="app-modern.js" as="script">
</head>
<body>
    <!-- PWA Install Banner -->
    <div id="install-banner" class="install-banner" style="display: none;">
        <div class="banner-content">
            <span class="banner-icon">üì±</span>
            <div class="banner-text">
                <strong>Instalar Listou</strong>
                <p>Acesso r√°pido direto da tela inicial</p>
            </div>
            <button id="install-app-btn" class="install-btn">Instalar</button>
            <button id="dismiss-install-btn" class="dismiss-btn">√ó</button>
        </div>
    </div>

    <!-- Header with modern design -->
    <header class="app-header">
        <div class="header-content">
            <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Abrir menu lateral">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            
            <div class="header-title">
                <h1>Listou</h1>
                <span class="header-subtitle">Sua Lista</span>
            </div>
            
            <div class="header-actions">
                <!-- Bot√£o de voz removido -->
                <button id="share-list-btn" class="header-btn" title="Compartilhar lista">
                    üì§
                </button>
            </div>
        </div>
    </header>

    <!-- Modern Sidebar inspired by Bring! and AnyList -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <img src="logo.svg" alt="Logo Listou" width="32" height="32">
                <h2>Listou</h2>
            </div>
            <button id="sidebar-close" class="sidebar-close" aria-label="Fechar menu">√ó</button>
        </div>

        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-section="main">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">Lista Principal</span>
                <span class="nav-badge" id="main-list-count">0</span>
            </a>
            <a href="#" class="nav-item" data-section="deals">
                <span class="nav-icon">üí∞</span>
                <span class="nav-text">Ofertas</span>
            </a>
            <a href="#" class="nav-item" data-section="history">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-text">Hist√≥rico</span>
            </a>
            <a href="#" class="nav-item" data-section="analytics">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Relat√≥rios</span>
            </a>
            <a href="#" class="nav-item" data-section="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-text">Configura√ß√µes</span>
            </a>
        </nav>

        <div class="sidebar-quick-actions">
            <button id="clear-all-btn" class="quick-action-btn danger">
                üóëÔ∏è Limpar Lista
            </button>
            <button id="export-list-btn" class="quick-action-btn">
                üì§ Exportar
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Lista Principal -->
        <section id="section-main" class="content-section active">
            <div class="section-header">
                <h2>Minha Lista de Compras</h2>
                <div class="list-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="total-items">0</span>
                        <span class="stat-label">Itens</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="completed-items">0</span>
                        <span class="stat-label">Conclu√≠dos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="total-value">R$ 0,00</span>
                        <span class="stat-label">Total Estimado</span>
                    </div>
                </div>
            </div>

            <!-- Input moderno com reconhecimento de voz -->
            <div class="input-container">
                <input type="text" 
                       id="item-input" 
                       placeholder="Adicionar item √† lista..." 
                       autocomplete="off">
                
                <!-- Bot√£o de voz removido -->
                
                <button id="add-item-btn" class="add-item-btn">
                    Adicionar
                </button>
                
                <!-- Autocomplete dropdown -->
                <div id="autocomplete-list" class="autocomplete-list"></div>
            </div>

            <!-- Filtros de categoria -->
            <div class="category-pills">
                <button class="category-pill active" data-category="all">
                    üì¶ Todos
                </button>
                <button class="category-pill" data-category="frutas">
                    üçé Frutas
                </button>
                <button class="category-pill" data-category="vegetais">
                    ü•ï Vegetais
                </button>
                <button class="category-pill" data-category="carnes">
                    ü•© Carnes
                </button>
                <button class="category-pill" data-category="latic√≠nios">
                    ü•õ Latic√≠nios
                </button>
                <button class="category-pill" data-category="gr√£os">
                    üåæ Gr√£os
                </button>
                <button class="category-pill" data-category="limpeza">
                    üßΩ Limpeza
                </button>
            </div>

            <!-- Lista de compras -->
            <div id="shopping-list" class="shopping-list">
                <div class="empty-state">
                    <div class="empty-state-icon">üõí</div>
                    <p>Sua lista est√° vazia</p>
                    <p class="empty-state-subtitle">Adicione itens usando o campo acima</p>
                </div>
            </div>
        </section>

    <!-- Se√ß√£o de sugest√µes inteligentes removida -->

        <!-- Ofertas e Promo√ß√µes -->
        <section id="section-deals" class="content-section">
            <div class="section-header">
                <h2>Ofertas e Promo√ß√µes</h2>
                <p class="section-subtitle">Economize em produtos que voc√™ compra frequentemente</p>
            </div>

            <div id="deals-container" class="deals-container">
                <!-- Deals will be populated by JavaScript -->
            </div>
        </section>

        <!-- Hist√≥rico -->
        <section id="section-history" class="content-section">
            <div class="section-header">
                <h2>Hist√≥rico de Compras</h2>
                <div class="history-filters">
                    <select id="history-period" class="history-filter">
                        <option value="week">√öltima semana</option>
                        <option value="month">√öltimo m√™s</option>
                        <option value="quarter">√öltimos 3 meses</option>
                        <option value="year">√öltimo ano</option>
                    </select>
                    <button id="clear-history-btn" class="header-btn danger" title="Limpar hist√≥rico">üóëÔ∏è Limpar</button>
                </div>
            </div>

            <div id="history-list" class="history-list">
                <!-- History will be populated by JavaScript -->
            </div>
        </section>

        <!-- Analytics -->
        <section id="section-analytics" class="content-section">
            <div class="section-header">
                <h2>Relat√≥rios e An√°lises</h2>
                <p class="section-subtitle">Insights sobre seus h√°bitos de compra</p>
            </div>

            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3>üìä Gastos por Categoria</h3>
                    <div id="category-spending-chart" class="chart-container">
                        <!-- Chart will be populated by JavaScript -->
                    </div>
                </div>

                <div class="analytics-card">
                    <h3>üìà Tend√™ncia de Gastos</h3>
                    <div id="spending-trend-chart" class="chart-container">
                        <!-- Chart will be populated by JavaScript -->
                    </div>
                </div>

                <div class="analytics-card">
                    <h3>üèÜ Itens Mais Comprados</h3>
                    <div id="top-items-list" class="top-items-list">
                        <!-- Top items will be populated by JavaScript -->
                    </div>
                </div>

                <div class="analytics-card">
                    <h3>üí∞ Economia Potencial</h3>
                    <div id="savings-summary" class="savings-summary">
                        <!-- Savings will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Configura√ß√µes -->
        <section id="section-settings" class="content-section">
            <div class="section-header">
                <h2>Configura√ß√µes</h2>
            </div>

            <div class="settings-grid">
                <div class="settings-card">
                    <h3>üé® Apar√™ncia</h3>
                    <div class="setting-item">
                        <label for="theme-select">Tema:</label>
                        <select id="theme-select" class="setting-select">
                            <option value="auto">Autom√°tico</option>
                            <option value="light">Claro</option>
                            <option value="dark">Escuro</option>
                        </select>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>üîî Notifica√ß√µes</h3>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="notifications-enabled">
                            <span class="slider"></span>
                        </label>
                        <span>Habilitar notifica√ß√µes</span>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>üóÑÔ∏è Dados</h3>
                    <div class="setting-item">
                        <button id="export-data-btn" class="settings-btn">Exportar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="import-data-btn" class="settings-btn">Importar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="clear-data-btn" class="settings-btn danger">Limpar todos os dados</button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>‚ÑπÔ∏è Sobre</h3>
                    <div class="about-info">
                        <p><strong>Listou</strong> v2.3.0</p>
                        <p>Lista de compras simples e eficiente</p>
                        <p>Desenvolvido por: Rafael Ara√∫jo</p>
                        <p><a href="privacidade.html" target="_blank">Pol√≠tica de Privacidade</a></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Loading indicator -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- Toast container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="db.js" type="module"></script>
    <script src="analytics.js" type="module"></script>
    <script src="notifications.js" type="module"></script>
    <script src="app-modern.js" type="module"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
