<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listou - Lista de Compras</title>
    <meta name="theme-color" content="#ffffff">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="styles.css">
    <!-- Biblioteca para leitura de QRCode -->
    <script src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
</head>
<body>
    <!-- Sidebar Toggle Button -->
    <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Abrir menu lateral">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <picture>
                <source srcset="logo.svg" type="image/svg+xml">
                <img src="logo.svg" alt="Logo Listou" class="sidebar-logo" width="48" height="48" loading="lazy">
            </picture>
            <h2>Listou</h2>
            <button id="sidebar-close" class="sidebar-close" aria-label="Fechar menu">×</button>
        </div>

        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-section="main">
                <span class="nav-icon">🏠</span>
                <span class="nav-text">Lista Principal</span>
            </a>
            <a href="#" class="nav-item" data-section="templates">
                <span class="nav-icon">📋</span>
                <span class="nav-text">Templates</span>
            </a>
            <a href="#" class="nav-item" data-section="analytics">
                <span class="nav-icon">📊</span>
                <span class="nav-text">Relatórios</span>
            </a>
            <a href="#" class="nav-item" data-section="history">
                <span class="nav-icon">📅</span>
                <span class="nav-text">Histórico</span>
            </a>
            <a href="#" class="nav-item" data-section="settings">
                <span class="nav-icon">⚙️</span>
                <span class="nav-text">Configurações</span>
            </a>
        </nav>

        <div class="sidebar-recent">
            <h3>Listas Recentes</h3>
            <div id="recent-lists" class="recent-lists">
                <div class="recent-item">
                    <span class="recent-icon">🛒</span>
                    <div class="recent-info">
                        <span class="recent-name">Compra da Semana</span>
                        <span class="recent-date">Hoje</span>
                    </div>
                </div>
                <div class="recent-item">
                    <span class="recent-icon">🥬</span>
                    <div class="recent-info">
                        <span class="recent-name">Feira Livre</span>
                        <span class="recent-date">Ontem</span>
                    </div>
                </div>
                <div class="recent-item">
                    <span class="recent-icon">🧽</span>
                    <div class="recent-info">
                        <span class="recent-name">Produtos de Limpeza</span>
                        <span class="recent-date">3 dias atrás</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar-actions">
            <button id="sidebar-share-btn" class="sidebar-action-btn">
                <span class="action-icon">📤</span>
                <span class="action-text">Compartilhar</span>
            </button>
            <button id="sidebar-export-btn" class="sidebar-action-btn">
                <span class="action-icon">📋</span>
                <span class="action-text">Exportar</span>
            </button>
            <button id="sidebar-scan-btn" class="sidebar-action-btn">
                <span class="action-icon">📱</span>
                <span class="action-text">Escanear QR</span>
                <span class="test-badge">TESTE</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        <!-- Main Section -->
        <section id="section-main" class="content-section active">
            <header class="section-header">
                <h1>Lista de Compras</h1>
                <div class="header-actions">
                    <button id="clear-all-btn" class="header-btn" title="Limpar lista">🗑️</button>
                    <button id="select-all-btn" class="header-btn" title="Selecionar todos">☑️</button>
                </div>
            </header>

            <section id="add-item-section">
                <div class="input-container">
                    <input id="item-input" type="text" placeholder="Adicionar item... (Enter ou Ctrl+Enter)" autocomplete="off" autofocus>
                    <div id="autocomplete-list" class="autocomplete-hidden"></div>
                </div>
                <div class="input-container" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input id="item-qty-input" type="number" min="1" step="1" placeholder="Qtd" style="width: 70px;">
                    <div class="input-price-wrapper" style="position: relative; display: flex; align-items: center;">
                        <span class="input-price-symbol" style="position: absolute; left: 10px; color: #888; font-size: 1rem; pointer-events: none;">R$</span>
                        <input id="item-price-input" type="number" min="0" step="0.01" placeholder="Valor" style="padding-left: 2.2em; width: 90px;">
                    </div>
                </div>
                <select id="category-select">
                    <option value="">Categoria</option>
                    <option value="frutas">🍎 Frutas</option>
                    <option value="verduras">🥬 Verduras</option>
                    <option value="carnes">🥩 Carnes</option>
                    <option value="laticínios">🥛 Laticínios</option>
                    <option value="padaria">🍞 Padaria</option>
                    <option value="limpeza">🧽 Limpeza</option>
                    <option value="higiene">🧴 Higiene</option>
                    <option value="bebidas">🥤 Bebidas</option>
                    <option value="outros">📦 Outros</option>
                </select>
                <button id="add-item-btn" title="Adicionar (Enter)">+</button>
            </section>

            <section id="stats-section" class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="total-items">0</span>
                        <span class="stat-label">Itens</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="completed-items">0</span>
                        <span class="stat-label">Comprados</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="total-value">R$ 0,00</span>
                        <span class="stat-label">Valor Previsto</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="realized-value">R$ 0,00</span>
                        <span class="stat-label">Valor Realizado</span>
                    </div>
                </div>
            </section>

            <section id="smart-suggestions" class="suggestions-section">
                <h3>🤖 Assistente IA Inteligente</h3>
                <div class="test-warning">
                    ⚠️ <strong>Funcionalidade em Teste</strong> - Esta feature pode não funcionar plenamente ainda.
                </div>
                <div class="ai-assistant">
                    <div class="ai-input-container">
                        <input id="ai-voice-input" type="text" placeholder="Experimente: 'Adicionar frutas para vitamina C'" class="ai-input">
                        <button id="ai-voice-btn" class="ai-voice-btn" title="Comando por voz">🎤</button>
                        <button id="ai-send-btn" class="ai-send-btn" title="Enviar">💬</button>
                    </div>
                    <div id="ai-response" class="ai-response"></div>
                </div>
                <h3>💡 Sugestões Inteligentes</h3>
                <div id="suggestions-list"></div>
            </section>

            <section id="current-list-section" class="current-list-section">
                <h3>🛒 Minha Lista de Compras</h3>
                <ul id="shopping-list"></ul>
            </section>
        </section>
        <!-- Templates Section -->
        <section id="section-templates" class="content-section">
            <header class="section-header">
                <h1>📋 Templates de Lista</h1>
                <button id="create-template-btn" class="header-btn primary" title="Criar novo template">+ Novo</button>
            </header>

            <div class="templates-grid">
                <button class="template-btn" data-template="compra-mes">
                    <span class="template-icon">🛒</span>
                    <span class="template-name">Compra do Mês</span>
                    <span class="template-count">15 itens</span>
                </button>
                <button class="template-btn" data-template="feira">
                    <span class="template-icon">🥬</span>
                    <span class="template-name">Feira Livre</span>
                    <span class="template-count">8 itens</span>
                </button>
                <button class="template-btn" data-template="limpeza">
                    <span class="template-icon">🧽</span>
                    <span class="template-name">Produtos de Limpeza</span>
                    <span class="template-count">6 itens</span>
                </button>
                <button class="template-btn" data-template="churrasco">
                    <span class="template-icon">🍖</span>
                    <span class="template-name">Churrasco</span>
                    <span class="template-count">12 itens</span>
                </button>
                <button class="template-btn" data-template="cafe-manha">
                    <span class="template-icon">☕</span>
                    <span class="template-name">Café da Manhã</span>
                    <span class="template-count">5 itens</span>
                </button>
                <button class="template-btn" data-template="favoritos">
                    <span class="template-icon">⭐</span>
                    <span class="template-name">Meus Favoritos</span>
                    <span class="template-count">20 itens</span>
                </button>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="section-analytics" class="content-section">
            <header class="section-header">
                <h1>📊 Relatórios e Análises</h1>
                <select id="analytics-period" class="header-select">
                    <option value="week">Esta semana</option>
                    <option value="month">Este mês</option>
                    <option value="quarter">Últimos 3 meses</option>
                </select>
            </header>

            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3>Gastos por Categoria</h3>
                    <div class="chart-placeholder">
                        <div class="category-expense">
                            <span class="category-name">🍎 Frutas</span>
                            <span class="category-value">R$ 85,50</span>
                        </div>
                        <div class="category-expense">
                            <span class="category-name">🥩 Carnes</span>
                            <span class="category-value">R$ 120,00</span>
                        </div>
                        <div class="category-expense">
                            <span class="category-name">🥛 Laticínios</span>
                            <span class="category-value">R$ 45,80</span>
                        </div>
                    </div>
                </div>

                <div class="analytics-card">
                    <h3>Itens Mais Comprados</h3>
                    <div class="top-items">
                        <div class="top-item">
                            <span class="item-rank">1</span>
                            <span class="item-name">Leite</span>
                            <span class="item-count">12x</span>
                        </div>
                        <div class="top-item">
                            <span class="item-rank">2</span>
                            <span class="item-name">Pão</span>
                            <span class="item-count">10x</span>
                        </div>
                        <div class="top-item">
                            <span class="item-rank">3</span>
                            <span class="item-name">Banana</span>
                            <span class="item-count">8x</span>
                        </div>
                    </div>
                </div>

                <div class="analytics-card">
                    <h3>Economia Este Mês</h3>
                    <div class="savings-info">
                        <span class="savings-amount">R$ 45,20</span>
                        <span class="savings-desc">Economia com ofertas</span>
                        <div class="savings-tip">💡 Use mais produtos da estação para economizar</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section id="section-history" class="content-section">
            <header class="section-header">
                <h1>📅 Histórico de Compras</h1>
                <button id="clear-history-btn" class="header-btn danger" title="Limpar histórico">Limpar</button>
            </header>

            <div class="history-timeline">
                <div class="history-item">
                    <div class="history-date">
                        <span class="history-day">Hoje</span>
                        <span class="history-time">14:30</span>
                    </div>
                    <div class="history-content">
                        <h4>Lista de Compras</h4>
                        <p>15 itens • R$ 87,50 • Supermercado Extra</p>
                        <span class="history-status completed">Concluída</span>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-date">
                        <span class="history-day">Ontem</span>
                        <span class="history-time">09:15</span>
                    </div>
                    <div class="history-content">
                        <h4>Feira Livre</h4>
                        <p>8 itens • R$ 35,20 • Feira da Liberdade</p>
                        <span class="history-status completed">Concluída</span>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-date">
                        <span class="history-day">3 dias</span>
                        <span class="history-time">16:45</span>
                    </div>
                    <div class="history-content">
                        <h4>Produtos de Limpeza</h4>
                        <p>6 itens • R$ 42,80 • Drogasil</p>
                        <span class="history-status completed">Concluída</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="section-settings" class="content-section">
            <header class="section-header">
                <h1>⚙️ Configurações</h1>
            </header>

            <div class="settings-groups">
                <div class="settings-group">
                    <h3>Notificações</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notifications-enabled" checked>
                            <span>Ativar notificações</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="smart-reminders" checked>
                            <span>Lembretes inteligentes</span>
                        </label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Funcionalidades</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="smart-suggestions-enabled" checked>
                            <span>Sugestões inteligentes</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="price-tracking-enabled" checked>
                            <span>Rastreamento de preços</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="auto-category-enabled" checked>
                            <span>Categorização automática</span>
                        </label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Dados e Privacidade</h3>
                    <div class="setting-item">
                        <button id="export-data-btn" class="settings-btn">Exportar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="import-data-btn" class="settings-btn">Importar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="clear-data-btn" class="settings-btn danger">Limpar todos os dados</button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Sobre</h3>
                    <div class="about-info">
                        <p><strong>Listou</strong> v2.0</p>
                        <p>Lista de compras inteligente</p>
                        <p>Desenvolvido por Rafael Araújo </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <script src="db.js" type="module"></script>
    <script src="qr.js" type="module"></script>
    <script src="intelligence.js" type="module"></script>
    <script src="analytics.js" type="module"></script>
    <script src="notifications.js" type="module"></script>
    <script src="app.js" type="module"></script>
</body>
</html>
