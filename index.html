<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listou - Lista de Compras</title>
    <meta name="theme-color" content="#0b0f1a">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="styles.css">
    <!-- Biblioteca para leitura de QRCode -->
    <script src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
</head>
<body>
    <!-- Sidebar Toggle Button -->
    <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Abrir menu lateral">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <picture>
                <source srcset="logo.svg" type="image/svg+xml">
                <img src="logo.svg" alt="Logo Listou" class="sidebar-logo" width="48" height="48" loading="lazy">
            </picture>
            <h2>Listou</h2>
            <button id="sidebar-close" class="sidebar-close" aria-label="Fechar menu">Ã—</button>
        </div>

        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-section="main">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-text">Lista Principal</span>
            </a>
            <a href="#" class="nav-item" data-section="templates">
                <span class="nav-icon">ğŸ“‹</span>
                <span class="nav-text">Templates</span>
            </a>
            <a href="#" class="nav-item" data-section="analytics">
                <span class="nav-icon">ğŸ“Š</span>
                <span class="nav-text">RelatÃ³rios</span>
            </a>

            <a href="#" class="nav-item" data-section="supermarkets">
                <span class="nav-icon">ğŸª</span>
                <span class="nav-text">Supermercados</span>
            </a>
            <a href="#" class="nav-item" data-section="settings">
                <span class="nav-icon">âš™ï¸</span>
                <span class="nav-text">ConfiguraÃ§Ãµes</span>
            </a>
        </nav>

        <div class="sidebar-recent">
            <h3>Listas Recentes</h3>
            <div id="recent-lists" class="recent-lists">
                <div class="recent-item">
                    <span class="recent-icon">ğŸ›’</span>
                    <div class="recent-info">
                        <span class="recent-name">Compra da Semana</span>
                        <span class="recent-date">Hoje</span>
                    </div>
                </div>
                <div class="recent-item">
                    <span class="recent-icon">ğŸ¥¬</span>
                    <div class="recent-info">
                        <span class="recent-name">Feira Livre</span>
                        <span class="recent-date">Ontem</span>
                    </div>
                </div>
                <div class="recent-item">
                    <span class="recent-icon">ğŸ§½</span>
                    <div class="recent-info">
                        <span class="recent-name">Produtos de Limpeza</span>
                        <span class="recent-date">3 dias atrÃ¡s</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar-actions">
            <button id="sidebar-share-btn" class="sidebar-action-btn">
                <span class="action-icon">ğŸ“¤</span>
                <span class="action-text">Compartilhar</span>
            </button>
            <button id="sidebar-export-btn" class="sidebar-action-btn">
                <span class="action-icon">ğŸ“‹</span>
                <span class="action-text">Exportar</span>
            </button>
            <button id="sidebar-scan-btn" class="sidebar-action-btn">
                <span class="action-icon">ğŸ“±</span>
                <span class="action-text">Escanear QR</span>
                <span class="test-badge">TESTE</span>
            </button>
        </div>
    </aside>



    <!-- Purchase Type Selection Screen -->
    <div id="purchase-type-screen" class="purchase-type-screen">
        <div class="purchase-type-container">
            <div class="logo-header">
                <picture>
                    <source srcset="logo.svg" type="image/svg+xml">
                    <img src="logo.svg" alt="Logo Listou" class="intro-logo" width="80" height="80" loading="lazy">
                </picture>
                <h1 class="intro-title">Listou</h1>
                <p class="intro-subtitle">Lista de compras inteligente</p>
            </div>
            
            <div class="purchase-options">
                <h2>Como deseja fazer suas compras?</h2>
                
                <div class="option-card" id="casual-purchase-option">
                    <div class="option-icon">ğŸ›’</div>
                    <h3>Compra Avulsa</h3>
                    <p>Lista simples e rÃ¡pida, sem anÃ¡lises ou relatÃ³rios</p>
                    <ul class="option-features">
                        <li>âœ“ Lista bÃ¡sica de compras</li>
                        <li>âœ“ Adicionar e marcar itens</li>
                        <li>âœ“ Controle de preÃ§os opcional</li>
                        <li>âœ— Sem relatÃ³rios detalhados</li>
                    </ul>
                    <button class="option-btn" data-type="casual" onclick="selectCasualType()">Escolher Avulsa</button>
                </div>
                
                <div class="option-card featured" id="controlled-purchase-option">
                    <div class="option-badge">Recomendado</div>
                    <div class="option-icon">ğŸ“Š</div>
                    <h3>Compra Controlada</h3>
                    <p>Lista completa com anÃ¡lises e relatÃ³rios comparativos</p>
                    <ul class="option-features">
                        <li>âœ“ Todas as funcionalidades da Avulsa</li>
                        <li>âœ“ AnÃ¡lise de gastos por perÃ­odo</li>
                        <li>âœ“ ComparaÃ§Ã£o entre supermercados</li>
                        <li>âœ“ SugestÃµes inteligentes</li>
                        <li>âœ“ RelatÃ³rios detalhados</li>
                        <li>âœ“ Templates de listas</li>
                    </ul>
                    <button class="option-btn primary" data-type="controlled" onclick="selectControlledType()">Escolher Controlada</button>
                </div>
            </div>
            
            <div class="purchase-type-footer">
                <p><small>VocÃª pode alterar esta configuraÃ§Ã£o a qualquer momento nas configuraÃ§Ãµes</small></p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        <!-- Main Section -->
        <section id="section-main" class="content-section active">

            <header class="section-header">
                <div class="main-header-redesigned">
                    <div class="logo-section">
                        <picture>
                            <source srcset="logo.svg" type="image/svg+xml">
                            <img src="logo.svg" alt="Logo Listou" class="main-logo" width="80" height="80" loading="lazy">
                        </picture>
                        <h2 class="app-title">Listou</h2>
                    </div>
                    <div class="section-title-container">
                        <div class="title-with-badge">
                            <h1 class="page-title">Lista de Compras</h1>
                            <span id="purchase-type-badge" class="purchase-type-badge">ğŸ“Š Controlada</span>
                            <button id="change-purchase-type-btn" class="header-btn" title="Alterar tipo de compra">ğŸ”„</button>
                        </div>
                        <div class="supermarket-input-container">
                            <select id="main-supermarket-select" class="supermarket-select" title="Selecione o supermercado">
                                <option value="">ğŸ“ Selecione o supermercado</option>
                            </select>
                            <small class="supermarket-hint">Para anÃ¡lises comparativas de preÃ§os</small>
                        </div>
                    </div>
                </div>
            </header>

            <section id="add-item-section">
                <div class="input-container">
                    <input id="item-input" type="text" placeholder="Adicionar item... (Enter ou Ctrl+Enter)" autocomplete="off" autofocus>
                    <div id="autocomplete-list" class="autocomplete-hidden"></div>
                </div>
                <div class="input-container" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input id="item-qty-input" type="number" min="1" step="1" placeholder="Qtd" style="width: 70px;">
                    <select id="item-unit-input" style="width: 80px;">
                        <option value="">Unid.</option>
                        <option value="unid">unid</option>
                        <option value="kg">kg</option>
                        <option value="g">g</option>
                        <option value="l">L</option>
                        <option value="ml">ml</option>
                        <option value="pc">pc</option>
                        <option value="cx">cx</option>
                        <option value="pct">pct</option>
                        <option value="dz">dz</option>
                    </select>
                    <div class="input-price-wrapper" style="position: relative; display: flex; align-items: center;">
                        <span class="input-price-symbol" style="position: absolute; left: 10px; color: #888; font-size: 1rem; pointer-events: none;">R$</span>
                        <input id="item-price-input" type="number" min="0" step="0.01" placeholder="Valor" style="padding-left: 2.2em; width: 90px;">
                    </div>
                </div>
                <select id="category-select">
                    <option value="">Categoria</option>
                    <option value="frutas">ğŸ Frutas</option>
                    <option value="verduras">ğŸ¥¬ Verduras</option>
                    <option value="carnes">ğŸ¥© Carnes</option>
                    <option value="laticÃ­nios">ğŸ¥› LaticÃ­nios</option>
                    <option value="padaria">ğŸ Padaria</option>
                    <option value="limpeza">ğŸ§½ Limpeza</option>
                    <option value="higiene">ğŸ§´ Higiene</option>
                    <option value="bebidas">ğŸ¥¤ Bebidas</option>
                    <option value="outros">ğŸ“¦ Outros</option>
                </select>
                <button id="add-item-btn" title="Adicionar (Enter)">+</button>
            </section>

            <section id="stats-section" class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="total-items">0</span>
                        <span class="stat-label">Itens</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="completed-items">0</span>
                        <span class="stat-label">Comprados</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="total-value">R$ 0,00</span>
                        <span class="stat-label">Valor Previsto</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="realized-value">R$ 0,00</span>
                        <span class="stat-label">Valor Realizado</span>
                    </div>
                </div>
            </section>

            <section id="smart-suggestions" class="suggestions-section">
                <h3>ğŸ’¡ SugestÃµes</h3>
                <div id="suggestions-list"></div>
            </section>

            <section id="current-list-section" class="current-list-section">
                <div class="list-header">
                    <h3>ğŸ›’ Minha Lista de Compras</h3>
                    <div class="list-header-actions">
                        <button id="finish-purchase-btn" class="header-btn primary" title="Finalizar compra e gerar relatÃ³rio">
                            âœ… Finalizar Compra
                        </button>
                        <button id="clear-all-btn" class="header-btn secondary" title="Limpar lista">
                            ğŸ—‘ï¸ Limpar
                        </button>
                    </div>
                </div>
                <ul id="shopping-list"></ul>
            </section>
        </section>
        <!-- Templates Section -->
        <section id="section-templates" class="content-section">
            <header class="section-header">
                <h1>ğŸ“‹ Templates de Lista</h1>
                <button id="create-template-btn" class="header-btn primary" title="Criar novo template">+ Novo</button>
            </header>

            <div class="templates-grid">
                <button class="template-btn" data-template="compra-mes">
                    <span class="template-icon">ğŸ›’</span>
                    <span class="template-name">Compra do MÃªs</span>
                    <span class="template-count">15 itens</span>
                </button>
                <button class="template-btn" data-template="feira">
                    <span class="template-icon">ğŸ¥¬</span>
                    <span class="template-name">Feira Livre</span>
                    <span class="template-count">8 itens</span>
                </button>
                <button class="template-btn" data-template="limpeza">
                    <span class="template-icon">ğŸ§½</span>
                    <span class="template-name">Produtos de Limpeza</span>
                    <span class="template-count">6 itens</span>
                </button>
                <button class="template-btn" data-template="churrasco">
                    <span class="template-icon">ğŸ–</span>
                    <span class="template-name">Churrasco</span>
                    <span class="template-count">12 itens</span>
                </button>
                <button class="template-btn" data-template="cafe-manha">
                    <span class="template-icon">â˜•</span>
                    <span class="template-name">CafÃ© da ManhÃ£</span>
                    <span class="template-count">5 itens</span>
                </button>
                <button class="template-btn" data-template="favoritos">
                    <span class="template-icon">â­</span>
                    <span class="template-name">Meus Favoritos</span>
                    <span class="template-count">20 itens</span>
                </button>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="section-analytics" class="content-section">
            <header class="section-header">
                <h1>ğŸ§  RelatÃ³rios Inteligentes</h1>
                <div class="section-header-controls">
                    <select id="analytics-period" class="header-select">
                        <option value="week">Esta semana</option>
                        <option value="month">Este mÃªs</option>
                        <option value="quarter">Ãšltimos 3 meses</option>
                        <option value="year">Este ano</option>
                        <option value="all">HistÃ³rico completo</option>
                    </select>
                    <button id="export-report-btn" class="header-action-btn" title="Exportar RelatÃ³rio">
                        ğŸ“„ Exportar
                    </button>
                </div>
            </header>

            <!-- Dashboard de MÃ©tricas Principais -->
            <div class="smart-dashboard">
                <div class="metric-card total-spending">
                    <div class="metric-icon">ğŸ’°</div>
                    <div class="metric-content">
                        <h3>Total Gasto</h3>
                        <span class="metric-value" id="total-spending">R$ 0,00</span>
                        <span class="metric-change" id="spending-change">--</span>
                    </div>
                </div>

                <div class="metric-card purchase-efficiency">
                    <div class="metric-icon">âš¡</div>
                    <div class="metric-content">
                        <h3>EficiÃªncia de Compras</h3>
                        <span class="metric-value" id="purchase-efficiency">--</span>
                        <span class="metric-description" id="efficiency-desc">Itens por compra</span>
                    </div>
                </div>

                <div class="metric-card savings-potential">
                    <div class="metric-icon">ğŸ¯</div>
                    <div class="metric-content">
                        <h3>Potencial de Economia</h3>
                        <span class="metric-value" id="savings-potential">R$ 0,00</span>
                        <span class="metric-description">Baseado em padrÃµes</span>
                    </div>
                </div>

                <div class="metric-card shopping-score">
                    <div class="metric-icon">ğŸ†</div>
                    <div class="metric-content">
                        <h3>Score de Compras</h3>
                        <span class="metric-value" id="shopping-score">--</span>
                        <span class="metric-description" id="score-level">Iniciante</span>
                    </div>
                </div>
            </div>

            <!-- IA Analytics -->
            <div class="ai-insights-section">
                <h2>ğŸ¤– Insights de IA</h2>
                <div class="insights-grid">
                    <div class="insight-card primary-insight">
                        <div class="insight-header">
                            <span class="insight-icon">ğŸ§ </span>
                            <h3>AnÃ¡lise Inteligente</h3>
                        </div>
                        <div class="insight-content" id="ai-primary-insight">
                            Complete suas primeiras compras para receber insights personalizados da nossa IA
                        </div>
                        <div class="insight-confidence" id="insight-confidence">
                            <span class="confidence-label">ConfianÃ§a:</span>
                            <span class="confidence-value">--</span>
                        </div>
                    </div>

                    <div class="insight-card trend-analysis">
                        <div class="insight-header">
                            <span class="insight-icon">ğŸ“ˆ</span>
                            <h3>TendÃªncias de Gastos</h3>
                        </div>
                        <div class="trend-chart" id="spending-trend">
                            <div class="no-data">Dados insuficientes para anÃ¡lise de tendÃªncias</div>
                        </div>
                    </div>

                    <div class="insight-card category-intelligence">
                        <div class="insight-header">
                            <span class="insight-icon">ğŸ·ï¸</span>
                            <h3>InteligÃªncia por Categoria</h3>
                        </div>
                        <div class="category-insights" id="category-breakdown">
                            <div class="no-data">Complete compras para ver anÃ¡lise por categoria</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AnÃ¡lise Comportamental -->
            <div class="behavioral-analysis">
                <h2>ğŸ§© AnÃ¡lise Comportamental</h2>
                <div class="behavior-grid">
                    <div class="behavior-card shopping-patterns">
                        <h3>ğŸ“… PadrÃµes de Compra</h3>
                        <div class="pattern-analysis" id="shopping-patterns">
                            <div class="pattern-item">
                                <span class="pattern-label">Dia preferido:</span>
                                <span class="pattern-value" id="preferred-day">--</span>
                            </div>
                            <div class="pattern-item">
                                <span class="pattern-label">FrequÃªncia:</span>
                                <span class="pattern-value" id="shopping-frequency">--</span>
                            </div>
                            <div class="pattern-item">
                                <span class="pattern-label">HorÃ¡rio tÃ­pico:</span>
                                <span class="pattern-value" id="typical-time">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="behavior-card price-sensitivity">
                        <h3>ğŸ’µ Sensibilidade a PreÃ§os</h3>
                        <div class="price-analysis" id="price-sensitivity">
                            <div class="sensitivity-meter">
                                <div class="meter-bar" id="sensitivity-bar"></div>
                                <span class="meter-label" id="sensitivity-label">Analisando...</span>
                            </div>
                            <div class="price-insights" id="price-insights">
                                Complete mais compras para anÃ¡lise de sensibilidade
                            </div>
                        </div>
                    </div>

                    <div class="behavior-card brand-loyalty">
                        <h3>ğŸª Fidelidade a Marcas/Locais</h3>
                        <div class="loyalty-analysis" id="brand-loyalty">
                            <div class="loyalty-score">
                                <span class="score-label">Score de Fidelidade:</span>
                                <span class="score-value" id="loyalty-score">--</span>
                            </div>
                            <div class="loyalty-details" id="loyalty-details">
                                Dados insuficientes para anÃ¡lise de fidelidade
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RecomendaÃ§Ãµes Inteligentes -->
            <div class="smart-recommendations">
                <h2>ğŸ’¡ RecomendaÃ§Ãµes Personalizadas</h2>
                <div class="recommendations-grid">
                    <div class="recommendation-card cost-optimization">
                        <div class="rec-header">
                            <span class="rec-icon">ğŸ’°</span>
                            <h3>OtimizaÃ§Ã£o de Custos</h3>
                        </div>
                        <div class="rec-content" id="cost-recommendations">
                            Complete compras para receber recomendaÃ§Ãµes de economia
                        </div>
                    </div>

                    <div class="recommendation-card shopping-optimization">
                        <div class="rec-header">
                            <span class="rec-icon">ğŸ¯</span>
                            <h3>OtimizaÃ§Ã£o de Compras</h3>
                        </div>
                        <div class="rec-content" id="shopping-recommendations">
                            A IA analisarÃ¡ seus padrÃµes para sugerir melhorias
                        </div>
                    </div>

                    <div class="recommendation-card seasonal-tips">
                        <div class="rec-header">
                            <span class="rec-icon">ğŸŒ±</span>
                            <h3>Dicas Sazonais</h3>
                        </div>
                        <div class="rec-content" id="seasonal-recommendations">
                            Receba dicas baseadas na Ã©poca do ano e seus hÃ¡bitos
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comparativo de Mercado -->
            <div class="market-comparison">
                <h2>ğŸ“Š Comparativo Inteligente</h2>
                <div class="comparison-grid">
                    <div class="comparison-card supermarket-ranking">
                        <h3>ğŸª Ranking de Supermercados</h3>
                        <div class="ranking-list" id="supermarket-ranking">
                            <div class="no-data">Complete compras em diferentes supermercados para ver comparaÃ§Ã£o</div>
                        </div>
                    </div>

                    <div class="comparison-card best-deals">
                        <h3>ğŸ¯ Melhores NegÃ³cios</h3>
                        <div class="deals-list" id="best-deals">
                            <div class="no-data">A IA identificarÃ¡ os melhores preÃ§os baseado no seu histÃ³rico</div>
                        </div>
                    </div>

                    <div class="comparison-card market-trends">
                        <h3>ğŸ“ˆ TendÃªncias do Mercado</h3>
                        <div class="trends-analysis" id="market-trends">
                            <div class="trend-item">
                                <span class="trend-label">InflaÃ§Ã£o detectada:</span>
                                <span class="trend-value">--</span>
                            </div>
                            <div class="trend-item">
                                <span class="trend-label">Produtos em alta:</span>
                                <span class="trend-value">--</span>
                            </div>
                            <div class="trend-item">
                                <span class="trend-label">Oportunidades:</span>
                                <span class="trend-value">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PrevisÃµes e ProjeÃ§Ãµes -->
            <div class="predictions-section">
                <h2>ğŸ”® PrevisÃµes Inteligentes</h2>
                <div class="predictions-grid">
                    <div class="prediction-card spending-forecast">
                        <h3>ğŸ’¸ PrevisÃ£o de Gastos</h3>
                        <div class="forecast-content" id="spending-forecast">
                            <div class="forecast-item">
                                <span class="forecast-period">PrÃ³ximo mÃªs:</span>
                                <span class="forecast-amount" id="next-month-forecast">--</span>
                            </div>
                            <div class="forecast-item">
                                <span class="forecast-period">PrÃ³ximos 3 meses:</span>
                                <span class="forecast-amount" id="quarter-forecast">--</span>
                            </div>
                            <div class="forecast-confidence">
                                <span class="confidence-label">PrecisÃ£o da previsÃ£o:</span>
                                <span class="confidence-value" id="forecast-confidence">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="prediction-card seasonal-planning">
                        <h3>ğŸ—“ï¸ Planejamento Sazonal</h3>
                        <div class="seasonal-content" id="seasonal-planning">
                            <div class="seasonal-alert" id="seasonal-alerts">
                                A IA alertarÃ¡ sobre mudanÃ§as sazonais de preÃ§os
                            </div>
                            <div class="planning-suggestions" id="planning-suggestions">
                                Receba sugestÃµes de planejamento baseadas no calendÃ¡rio
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
                <!-- Card Principal de Economia -->
                <div class="analytics-card primary-card">
                    <h3>ğŸ’° Total de Gastos</h3>
                    <div class="savings-summary">
                        <span class="savings-amount" id="total-savings">R$ 0,00</span>
                        <span class="savings-desc">Nenhuma compra registrada</span>
                        <div class="savings-comparison">
                            <span class="comparison-item">
                                <span class="comparison-label">Seu gasto no perÃ­odo:</span>
                                <span class="comparison-value" id="monthly-spending">R$ 0,00</span>
                            </span>
                            <span class="comparison-item">
                                <span class="comparison-label">Finalize compras para ver relatÃ³rios</span>
                                <span class="comparison-value">--</span>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- ComparaÃ§Ã£o de Supermercados -->
                <div class="analytics-card supermarket-comparison">
                    <h3>ï¿½ Ranking de PreÃ§os</h3>
                    <div id="supermarket-ranking" class="ranking-container">
                        <div class="no-data">Nenhuma compra com supermercado informado</div>
                    </div>
                </div>

                <!-- Top Itens com Melhor PreÃ§o -->
                <div class="analytics-card top-deals">
                    <h3>ğŸ¯ Produtos Mais Comprados</h3>
                    <div id="best-prices-items" class="deals-container">
                        <div class="no-data">Complete compras para ver seus produtos mais comprados</div>
                    </div>
                </div>

                <!-- Insights Essenciais -->
                <div class="analytics-card insights-minimal">
                    <h3>ğŸ’¡ Resumo do PerÃ­odo</h3>
                    <div id="main-insight" class="insight-highlight">
                        <div class="insight-message">
                            Complete suas primeiras compras para visualizar relatÃ³rios personalizados
                        </div>
                        <div class="insight-action">
                            ï¿½ RelatÃ³rios baseados apenas nos seus dados
                        </div>
                    </div>
                </div>
            </div>
        </section>
        </section>

        <!-- History Section -->


        <!-- Supermarkets Section -->
        <section id="section-supermarkets" class="content-section">
            <header class="section-header">
                <h1>ğŸª Supermercados</h1>
                <button id="add-supermarket-btn" class="header-btn primary" title="Adicionar supermercado">+ Adicionar</button>
            </header>

            <div class="supermarkets-container">
                <!-- Seletor de supermercado atual -->
                <div class="current-supermarket">
                    <h3>Supermercado Atual</h3>
                    <select id="current-supermarket-select" class="supermarket-selector">
                        <option value="">Selecione um supermercado</option>
                    </select>
                    <p class="supermarket-info">Selecione onde vocÃª estÃ¡ fazendo suas compras</p>
                </div>

                <!-- Lista de supermercados cadastrados -->
                <div class="supermarkets-list">
                    <h3>Supermercados Cadastrados</h3>
                    <div id="supermarkets-grid" class="supermarkets-grid">
                        <!-- Os supermercados serÃ£o carregados dinamicamente aqui -->
                    </div>
                </div>
            </div>

            <!-- Modal para adicionar/editar supermercado -->
            <div id="supermarket-modal" class="modal supermarket-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="supermarket-modal-title">Adicionar Supermercado</h3>
                        <button class="modal-close" onclick="closeSupermarketModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="supermarket-form">
                            <div class="form-group">
                                <label for="supermarket-name">Nome do Supermercado*</label>
                                <input type="text" id="supermarket-name" required placeholder="Ex: PÃ£o de AÃ§Ãºcar">
                            </div>
                            <div class="form-group">
                                <label for="supermarket-location">LocalizaÃ§Ã£o</label>
                                <input type="text" id="supermarket-location" placeholder="Ex: Shopping Center Norte">
                            </div>
                            <div class="form-group">
                                <label for="supermarket-type">Tipo</label>
                                <select id="supermarket-type">
                                    <option value="supermercado">Supermercado</option>
                                    <option value="hipermercado">Hipermercado</option>
                                    <option value="atacado">Atacado</option>
                                    <option value="mercearia">Mercearia</option>
                                    <option value="feira">Feira</option>
                                    <option value="farmacia">FarmÃ¡cia</option>
                                    <option value="conveniencia">ConveniÃªncia</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="supermarket-notes">ObservaÃ§Ãµes</label>
                                <textarea id="supermarket-notes" placeholder="Ex: Melhores preÃ§os em produtos de limpeza"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" onclick="closeSupermarketModal()">Cancelar</button>
                        <button type="submit" form="supermarket-form" class="btn-primary">Salvar</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="section-settings" class="content-section">
            <header class="section-header">
                <h1>âš™ï¸ ConfiguraÃ§Ãµes</h1>
            </header>

            <div class="settings-groups">
                <div class="settings-group">
                    <h3>NotificaÃ§Ãµes</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notifications-enabled" checked>
                            <span>Ativar notificaÃ§Ãµes</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="smart-reminders" checked>
                            <span>Lembretes inteligentes</span>
                        </label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Funcionalidades</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="smart-suggestions-enabled" checked>
                            <span>SugestÃµes inteligentes</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="price-tracking-enabled" checked>
                            <span>Rastreamento de preÃ§os</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="auto-category-enabled" checked>
                            <span>CategorizaÃ§Ã£o automÃ¡tica</span>
                        </label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Dados e Privacidade</h3>
                    <div class="setting-item">
                        <button id="export-data-btn" class="settings-btn">Exportar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="import-data-btn" class="settings-btn">Importar dados</button>
                    </div>
                    <div class="setting-item">
                        <button id="clear-data-btn" class="settings-btn danger">Limpar todos os dados</button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Sobre</h3>
                    <div class="about-info">
                        <p><strong>Listou</strong> v2.0</p>
                        <p>Lista de compras inteligente</p>
                        <p>Desenvolvido por Rafael AraÃºjo </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Script de emergÃªncia para seleÃ§Ã£o de tipo de compra -->
    <script>
        // FunÃ§Ãµes inline para garantir funcionamento
        function selectCasualType() {
            console.log('ğŸ›’ SeleÃ§Ã£o Casual (inline)');
            localStorage.setItem('listou-purchase-type', 'casual');
            hideSelectionScreen();
        }
        
        function selectControlledType() {
            console.log('ğŸ“Š SeleÃ§Ã£o Controlada (inline)');
            localStorage.setItem('listou-purchase-type', 'controlled');
            hideSelectionScreen();
        }
        
        function hideSelectionScreen() {
            console.log('ğŸ  Escondendo tela de seleÃ§Ã£o (inline)');
            const screen = document.getElementById('purchase-type-screen');
            const mainContent = document.getElementById('main-content');
            
            if (screen) {
                screen.style.display = 'none';
                screen.style.visibility = 'hidden';
                screen.style.opacity = '0';
                screen.style.zIndex = '-999';
            }
            
            if (mainContent) {
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
                mainContent.style.opacity = '1';
                mainContent.style.zIndex = '1';
            }
            
            // Foca no input apÃ³s um momento
            setTimeout(() => {
                const itemInput = document.getElementById('item-input');
                if (itemInput) {
                    itemInput.focus();
                    console.log('âŒ¨ï¸ Foco no input (inline)');
                }
            }, 500);
        }
        
        // FunÃ§Ã£o de emergÃªncia global
        window.forceShowApp = function() {
            console.log('ğŸš¨ FORÃ‡ANDO EXIBIÃ‡ÃƒO DO APP');
            const screen = document.getElementById('purchase-type-screen');
            if (screen) screen.remove();
            
            const mainContent = document.getElementById('main-content');
            if (mainContent) {
                mainContent.style.display = 'block !important';
                mainContent.style.visibility = 'visible !important';
                mainContent.style.opacity = '1 !important';
                mainContent.style.position = 'relative !important';
                mainContent.style.zIndex = '9999 !important';
            }
        };
        
        // Auto-esconde se jÃ¡ tem tipo salvo
        document.addEventListener('DOMContentLoaded', () => {
            const savedType = localStorage.getItem('listou-purchase-type');
            if (savedType) {
                console.log('ğŸ”„ Tipo jÃ¡ salvo, escondendo tela');
                hideSelectionScreen();
            }
        });
    </script>

    <script src="db.js" type="module"></script>
    <script src="qr.js" type="module"></script>
    <script src="intelligence.js" type="module"></script>
    <script src="analytics.js" type="module"></script>
    <script src="notifications.js" type="module"></script>
    <script src="app.js" type="module"></script>
    <!-- Script para dados de demonstraÃ§Ã£o - remover em produÃ§Ã£o -->
    <script src="supermarket-demo-data.js"></script>
</body>
</html>
